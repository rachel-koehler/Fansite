"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2720],{93760:function(e,t,a){a.d(t,{Z:function(){return B}});var i,r,s,o,n=a(52322),l=a(2784),d=a(4283),E=a(85767),c=a(83128),u=a(51250);let I="ad-oo",T={getConsentFromCookie(e,t){let a=(0,u.rZ)(I,t?.headers);if(void 0!==a)return!(parseInt(a)&e)},setConsentToCookie(e,t,a){let i=(0,u.rZ)(I,a),r=0;if(void 0!==i&&(("number"==typeof i||"string"==typeof i)&&(r=parseInt(i)),r&t&&!e||!(r&t)&&e))return;e||(r|=t);let s=new Date;s.setHours(s.getHours()+36),(0,u.Ys)(I,r.toString(),s,"shared")}};var m=a(88023),p=a(54073),g=a.n(p),A=a(45455),h=a.n(A),S=a(12859),f=a(76460);let _=(e,t)=>{window?.mediaOrchestrator?.publish(e,t)},w=e=>{let t=e?.slots;return t&&t[S.A.SIS_PIXEL]?.slotMarkup},N=(e,t)=>{let a=e.match(/el\.src="(.*)";/),i=a?a[1]:void 0;return i||t.error("Failed to retrieve SIS Pixel URL"),i},R=async(e,t)=>{try{return await fetch(e,{method:"GET",credentials:"include"}),!0}catch(e){t.error("Error fetching SIS Pixel",e)}};var D=a(48574);let y=(0,a(16189).createLogger)()("util_sisPixel_rws");(i=s||(s={})).GRANTED="granted",i.PROMPT="prompt",i.DENIED="denied";let L=new Set().add("fake_treatment_1.1").add("fake_treatment_1.2").add("fake_treatment_1.3").add("fake_control_2"),v=["mousedown","scroll","keydown"],b="https://amazon-adsystem.com",O=async()=>{let e="cookieDeprecationLabel"in navigator,t="requestStorageAccessFor"in document;if(!e||!t)return y.log("Browser not compatible with Related Website Sets",{hasCookieDeprecationLabel:e,hasRequestStorageAccessFor:t}),!1;try{let e=await navigator.cookieDeprecationLabel.getValue();return y.log(`Received cookieDeprecationLabel: ${e}`),L.has(e)}catch(e){return y.error("Issue fetching cookieDeprecationLabel",e),!1}},M=async()=>{let e=await C();switch(y.log(`Received storageAccessPermissionStatus: ${e}`),e){case"granted":return k();case"prompt":return P()}y.log(`'top-level-storage-access' permissions for ${b}: denied`)},P=async()=>{let e;if(!navigator.userActivation)return;let t=new Promise(t=>{e=e=>t(e)}),a=async()=>{navigator.userActivation.isActive&&(v.forEach(e=>{document.removeEventListener(e,a)}),await k(),e(!0))};return v.forEach(e=>{document.addEventListener(e,a)}),t},C=async()=>{try{return(await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:b})).state}catch(e){y.error("Error querying Storage Access permissions",e);return}},k=async()=>{if("requestStorageAccessFor"in document)try{return await document.requestStorageAccessFor(b),!0}catch(e){y.error("Error requesting storage access",e)}},H=l.memo(e=>{let{sisSlotMarkup:t}=e,[a,i]=(0,l.useState)(!1),r=(0,D.wL)("util_sisSlotMarkup");return(0,l.useEffect)(()=>{(async()=>{if(!await O())return i(!0);await M();let e=N(t,r);e&&await R(e,r)})()},[]),a?(0,n.jsx)("div",{ref:m.dangerouslySetHTML.bind(null,t)}):null});(r=o||(o={})).AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE="1P-ad-autoplay-video-maybe-present",r.EMPTY="",r.ENDED="ended",r.LOADSTART="loadstart",r.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE="no-autoplay-video-ad-detected",r.PAUSE="pause",r.PLAY="play",r.THIRD_PARTY_AD_DETECTED_EVENT_TYPE="3P-ad-no-autoplay-video-detected";let x=e=>{let{adSlotsInfo:t}=e;(0,f.WJ)();let a=()=>{(0,m.isFullscreen)()||(0,m.makeAdAJAXRequest)(t).finally(()=>m.responsiveAdAPIWrapper.setPreviousWindowWidth())},{slotsEnabled:i,clientSideUrlBase:r,atfSlots:s,slotSizeMap:d,apsSlotInfoMap:E}=(0,f.OF)(t);l.useEffect(()=>{let e,n;if(i&&!h()(d)&&(m.responsiveAdAPIWrapper.setPreviousWindowWidth(),e=g()(a,750),window.addEventListener("resize",e),t?.adRefreshInfo?.isEnabled&&("complete"===document.readyState?(0,m.handleAutoRefresh)(t):window.addEventListener("load",()=>(0,m.handleAutoRefresh)(t)))),!i||!r||!s.includes(S.A.INLINE20)){let e={type:o.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,slotName:S.A.INLINE20,timestamp:Date.now()},t={type:o.EMPTY,slotName:"",timestamp:Date.now()};_(m.MediaEvent.MEDIA_PLAYBACK_EVENT_NAME,e),_(m.MediaEvent.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,t)}return()=>{e&&window.removeEventListener("resize",e),n&&window.removeEventListener("load",n)}},[]);let c=(0,f.Bf)(i,r,s,d,E),u=w(t);return(0,n.jsxs)(n.Fragment,{children:[u?(0,n.jsx)(H,{sisSlotMarkup:u}):null,(0,n.jsx)("script",{async:!0,dangerouslySetInnerHTML:{__html:c}})]})};function B(){let e=(0,E.B)(),{adSlotsInfo:t}=(0,c.Ok)();return e?.context?.sidecar?.ads?.adsCcbaConsent!==void 0&&T.setConsentToCookie(e.context.sidecar?.ads?.adsCcbaConsent,16,e.context?.headers),(0,n.jsx)(d.Z,{name:"IMDbNextAdPageData",children:(0,n.jsx)(x,{adSlotsInfo:t})})}},12859:function(e,t,a){a.d(t,{A:function(){return i}});let i={INLINE20:"inline20",INLINE40_MAIN:"inline40-responsive-main",INLINE40_SIDEBAR:"inline40-responsive-sidebar",INLINE40:"inline40",INLINE50:"inline50",INLINE60:"inline60",INLINE80:"inline80",INLINEBOTTOM:"inlinebottom",INTERSTITIAL:"interstitial",MEDIAVIEWER_BANNER:"mediaviewer_banner",PROMOTED_WATCH_BAR:"promoted_watch_bar",PROVIDER_PROMOTION:"provider_promotion",SIS_PIXEL:"sis_pixel",VIDEO_CAROUSEL_ADSCANNER:"video_carousel_adscanner"}},76460:function(e,t,a){var i,r,s,o,n,l;a.d(t,{WJ:function(){return d},Bf:function(){return E},OF:function(){return c},Wd:function(){return u}}),(o=i||(i={})).PREMIUM="premium",o.STANDARD="standard",(n=r||(r={})).BLANK="blank",n.UNKNOWN="unknown",(l=s||(s={})).BLANK="blk",l.UNKNOWN="unk";let d=()=>{void 0===window.hasAdAJAXCallFired&&(window.hasAdAJAXCallFired=!1)},E=(e,t,a,i,r)=>`
        if (window && window.ad_utils && window.ad_utils.makeAtfSlotsCall) {
            window.ad_utils.makeAtfSlotsCall(
                ${e},
                '${t}',
                '${a}',
                ${JSON.stringify(i)},
                ${r?JSON.stringify(r):"{}"});
    }`,c=e=>({slotsEnabled:!e||e.slotsEnabled,clientSideUrlBase:e?e.clientSideUrl:"",atfSlots:e&&e.slots?Object.keys(e.slots).join(","):"",slotSizeMap:e?e.slotSizeMap:{},apsSlotInfoMap:e&&e.apsSlotInfoMap||{}}),u=e=>!e||e?.creativeMetadata?.creativeWidth===0||e?.creativeMetadata?.adProductType?.name===r.BLANK},62720:function(e,t,a){let i,r;a.r(t),a.d(t,{__N_SSP:function(){return eL},default:function(){return ev}});var s,o,n=a(52322),l=a(88023),d=a(66898),E=a(11778),c=a(70314),u=a.n(c),I=a(2784),T=a(25436),m=a(83128),p=a(16189);let g=(0,p.createLogger)()("util_fetchAdServiceAd"),A=async e=>{try{return await (0,l.makeAdServiceAdAJAXRequest)(e)}catch(e){return g.error("makeAdServiceAdAJAXRequest failed",e),null}};var h=a(92883),S=a(14865),f=a(45103),_=a(56812),w=a(77594),N=a(67646),R=a(81988),D=a(96556),y=a(93760),L=a(84209),v=a(28827),b=a(11793),O=a(52817),M=a(72779),P=a.n(M),C=a(73282),k=a(88173),H=a(11817);let x={NO_ELEMENT:"advertising banner/interstitial component or iframe are undefined",NO_IFRAME_CONTENT:"banner or interstitial was clicked on, but no contentDocument was found in iframe",NO_CLICK_TARGET:"banner or interstitial was clicked on, but no clickable element was found in iframe"},B=(0,p.createLogger)()("");function $(e,t,a){let i=t?.querySelector("iframe");if(!i){B.error(x.NO_ELEMENT);return}let r=i.contentDocument;if(!r||!r.elementFromPoint){B.error(x.NO_IFRAME_CONTENT);return}let{left:s,top:o}=i.getBoundingClientRect(),n=r.elementFromPoint(e.clientX-s,e.clientY-o);if(n){n.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,H.P)(a);return}let l=t?.querySelector("#interstitial_sponsored");if(l){let{left:t,top:i,width:r,height:s}=l.getBoundingClientRect(),o=e.clientX-t,n=e.clientY-i;if(o>0&&o<=r&&n>0&&n<=s){l.dispatchEvent(new MouseEvent(e.type,{bubbles:!0,cancelable:!0})),(0,H.P)(a);return}}B.error(x.NO_CLICK_TARGET)}var G=a(42057);let W=e=>{let{galleryUrl:t}=e,a=(0,v.N)({id:"mediaViewer_ariaLabel_gallery",defaultMessage:"gallery"});return(0,n.jsx)(f.IconButton,{"data-testid":"mv-gallery-button",name:"grid-view",label:a,href:t,onColor:"base"})},U=e=>{let{state:t,className:a,imagePosition:i}=e,r={countLabel:(0,v.N)(k.KL.countLabel,{position:i,total:t.totalImages})},s=`${k.Nw[t.type]}_mv`,o=(0,I.useRef)(null);return(0,n.jsx)(C.ol,{className:P()(k.$C.ACTION_BAR,l.MEDIAVIEWER_ACTIONBAR_CLASS,a),refTagPrefix:s,shareProps:{shareBody:j,emailSubject:j,label:F},breadcrumbProps:{refTagPrefix:s,"data-testid":"mv-breadcrumb-close-button"},actions:(0,n.jsxs)(n.Fragment,{children:[!t.showInterstitial&&!!t.position&&t.totalImages&&(0,n.jsx)(G.vI,{"data-testid":k.$C.ACTION_BAR_GALLERY_COUNT,children:r.countLabel}),(0,n.jsx)(W,{galleryUrl:s?`${t.galleryUrl}?ref_=${s}_sm`:t.galleryUrl})]}),heightClass:"extended",children:!t.showInterstitial&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.ZP,{name:l.MEDIAVIEWER_BANNER_SLOT_NAME}),(0,n.jsx)(G.Ov,{ref:o,onClick:e=>{$(e,o.current,"ad-banner")}})]})})},F={id:"mediaViewer_ariaLabel_shareOnSocialMedia",defaultMessage:"share on social media"},j={id:"mediaViewer_shareText_viewThisImage",defaultMessage:"View this image on IMDb!"},V=1e3/60;function Y(){clearTimeout(i),i=void 0}function q(e){return e>0?Math.min(450,e):e<0?Math.max(-450,e):0}function K(e,t,a){30>Math.abs(e)?(t(0),Y()):(a(),t(q(-e)),Y(),setTimeout(()=>t(0),V))}var Z=a(5632),J=a(18174),X=a.n(J),z=a(26806),Q=a(72072),ee=a(76460),et=a(66662),ea=a(27261),ei=a(98046),er=a(87712),es=a(19126),eo=a.n(es);let en=e=>{let t=e?eo().parse(window.location.search.replace("?","")):{};return delete t.ref_,eo().stringify(t)};var el=a(72579),ed=a.n(el);let eE=(e,t)=>{switch(e){case er.b.NAME:return ed()(t,`${e}.${e}Text.text`,"");case er.b.TITLE:let a=ed()(t,`${e}.${e}Text.text`,""),i=ed()(t,`${e}.releaseYear.year`,"");return i?`${a} (${i})`:a;case er.b.GALLERY:return ed()(t,"imageGallery.galleryText","");case er.b.LIST:return ed()(t,`${e}.name.originalText`,"")}},ec=(e,t)=>e===er.b.NAME||e===er.b.TITLE?`/${e}/${t}/mediaindex/`:`/${e}/${t}/`,eu=(e,t)=>{let a=[];return t.forEach(t=>{let i=e===er.b.LIST?{...t,node:{...t.node.item,caption:t.node.description?.originalText||t.node.item.caption}}:{...t};a.push(i)}),a},eI=(e,t,a)=>{let i=k.Qn[e],r=e===er.b.LIST?"items":"images",s=`${i}.${r}`,o=`${i}.wrapFront`,n=`${i}.wrapBack`,l=i=>({images:eu(e,ed()(a,`${i}.edges`,[])),title:eE(e,a),galleryUrl:ec(e,t),total:ed()(a,`${i}.total`,0),startCursor:ed()(a,`${i}.pageInfo.startCursor`,""),hasPreviousPage:ed()(a,`${i}.pageInfo.hasPreviousPage`,!1),endCursor:ed()(a,`${i}.pageInfo.endCursor`,""),hasNextPage:ed()(a,`${i}.pageInfo.hasNextPage`,!1)}),d=l(s),E=l(o),c=l(n),u=d.total?d:E.total?E:c;return{images:[...d.images,...E.images,...c.images],title:u.title,galleryUrl:u.galleryUrl,total:u.total,startCursor:u.startCursor,hasPreviousPage:u.hasPreviousPage,endCursor:u.endCursor,hasNextPage:d.hasNextPage}},eT=(e,t,a,i,r,s)=>{let o=[],n={main:void 0};switch(e){case"init":n.main={id:t,jumpTo:r,first:k.kH,last:k.kH/2,lastYes:!0,firstYes:!0};break;case"left":o=[...Array(k.kH).keys()].map(e=>{let t=a-e;return t<=0?null:t}),n.main={id:t,before:i,last:k.kH,lastYes:!0,firstYes:!1};break;case"right":o=[...Array(k.kH).keys()].map(e=>{let t=a+e;return t>s?null:t}),n.main={id:t,after:i,first:k.kH,lastYes:!1,firstYes:!0}}return o=o.filter(e=>null!==e),"init"!==e&&o.length<1&&(n.main=void 0),{fetchPositions:o,args:n}},em=(e,t)=>{let a,i;let r=e.position||0,s=e.media&&e.media[r],o=s?.node.id;return o&&(a=e.vanitySubType&&e.vanityType?`/[${k.Ek}]/[vanityOrId]/[idWithVanity]/mediaviewer/[img]`:`/[${k.Ek}]/[vanityOrId]/mediaviewer/[img]`,i=e.vanitySubType&&e.vanityType?`/${e.vanityType}/${e.vanitySubType}/${e.listId}/mediaviewer/${o}/${t&&`?${t}`}`:`/${e.vanityType??e.type}/${e.listId}/mediaviewer/${o}/${t&&`?${t}`}`),{url:a,path:i}},ep=(e,t,a)=>{let i=k.Nw[t],r=k.k6[e];return`${i}_${a?"mv_ad":"mv"}_${r}`},eg=e=>{var t;return Math.abs(e)===k.ve||0==((Math.abs(e)-k.ve)%(t=k.gG)+t)%t},eA=e=>{var t;return 0==((Math.abs(e)-k.ve)%(t=k.HP)+t)%t};(s=o||(o={})).INITIALIZE="INITIALIZE",s.PAGE_LEFT="PAGE-LEFT",s.PAGE_RIGHT="PAGE-RIGHT",s.GOTO_IMAGE_ID="GOTO-IMAGE-ID",s.UPDATE_DISTANCE="UPDATE-DISTANCE",s.UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE="UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",s.FETCH_IMAGES="FETCH-IMAGES",s.FETCH_IMAGES_PENDING="FETCH-IMAGES-PENDING",s.FETCH_IMAGES_DONE="FETCH-IMAGES-DONE",s.FETCH_IMAGES_FAILED="FETCH-IMAGES-FAILED",s.SHOW_EDIT_DRAWER="SHOW-EDIT-DRAWER",s.HIDE_EDIT_DRAWER="HIDE-EDIT-DRAWER",s.SHOW_REPORT_DRAWER="SHOW-REPORT-DRAWER",s.HIDE_REPORT_DRAWER="HIDE-REPORT-DRAWER",s.SHOW_BOTTOM_SHEET="SHOW-BOTTOM-SHEET",s.HIDE_BOTTOM_SHEET="HIDE-BOTTOM-SHEET",s.SHOW_PAGER="SHOW-PAGER",s.HIDE_PAGER="HIDE-PAGER",s.SET_MOUSE_TIMEOUT_ID="SET-MOUSE-TIMEOUT-ID",s.SET_LAST_TIME_MOUSE_MOVED="SET-LAST-TIME-MOUSE-MOVED";let eh=(0,p.createLogger)()("useMediaViewerState"),eS={initialize:e=>(t,a)=>{let{initialImageId:i,type:r,listId:s}=a();e||(t(i?eS.fetchImageBatch({direction:"init",jumpTo:i}):eS.fetchImageBatch({direction:"init",position:0})),t({type:"INITIALIZE",payload:{setState:{position:0,type:r,listId:s,initialImageId:i,enablePagers:!0}}}))},gotoImageId:e=>(t,a)=>{let i=Object.values(a().media).find(t=>t.node.id===e);t(i?{type:"GOTO-IMAGE-ID",payload:{position:i.position}}:eS.fetchImageBatch({direction:"init",jumpTo:e}))},fetchImageBatch:e=>(t,a)=>{let{jumpTo:i,direction:r,position:s}=e,o=a(),{type:n,listId:l,media:d,isUserLoggedIn:E}=o,{fetchPositions:c,args:I}=eT(r,l,s,d[o.position]?.cursor,i,o.totalImages),T=n===er.b.LIST,{publicRuntimeConfig:m}=u()();t({type:"FETCH-IMAGES-PENDING",payload:{fetchPositions:c,setState:{initiallyLoading:0===c.length&&!s}}}),Promise.all([!!I.main&&o.gqlClient.query((0,k.s)(n),I.main,{url:m.graphQLEndpoint,serverSideCacheable:!(T&&E)}).toPromise().then(e=>{let i=eI(n,l,e.data);if(i.images.length<1){let e="mediaviewer queryData image was empty";throw eh.error(e,{type:a().type,id:a().listId}),Error(e)}t({type:"FETCH-IMAGES-DONE",payload:{direction:r,fetchPositions:c,fetchResult:i}})}).catch(e=>{eh.error("mediaviewer query resulted in error",{type:a().type,id:a().listId,error:e}),t({type:"FETCH-IMAGES-FAILED",payload:{fetchPositions:c,setState:{initiallyLoading:!1},fetchError:e}})})].filter(Boolean))},page:e=>(t,a)=>{let i,r,s;let o=a(),n={left:-1,right:1,load_left:-4,load_right:4},l=o.pageDirection;if(o.loading[o.position]&&!o.showInterstitial||!o.enablePagers)return;let d=o.showInterstitial;eg(a().distance)&&(a().unseenInterstitialAvailable=!1),eA(a().distance)&&o.adHandlers?.updateBannerAd(),t(eS.updateDistance(n[e])),t(eS.stageInterstitialAd());let E=a().showInterstitial,c=d&&l!==e,u=E||c?a().position:a().position+n[e],I=a().position+n[`load_${e}`],m={type:o.type,subType:T.SubPageType.MEDIA_SINGLE,id:o.listId};switch(e){case"left":r=u<=0?a().totalImages:u,i=I<=0?1:r===a().totalImages?a().totalImages:I,s="PAGE-LEFT";break;case"right":r=u>o.totalImages?1:u,i=I>o.totalImages?a().totalImages:1===r?1:I,s="PAGE-RIGHT"}o.media[r]||(i=r),o.media[i]||o.errors[i]||o.loading[i]||t(eS.fetchImageBatch({direction:e,position:r}));let p=ep(e,o.type,d);a().showInterstitial?(0,ea.K8)(p,m,`mvi-${s}`,ei.qB.ACTION_ONLY):(0,ea.K8)(p,m,`mv-${s}`,ei.qB.PAGE_HIT),t({type:s,payload:{position:r,refTag:p}})},updateDistance:e=>(t,a)=>{t({type:"UPDATE-DISTANCE",payload:{distance:a().distance+e}})},stageInterstitialAd:()=>async(e,t)=>{if(!t().unseenInterstitialAvailable){let a=await t().adHandlers?.updateInterstitialAd(),i=!(0,ee.Wd)(a?.slotsMap?.[l.INTERSTITIAL_SLOT_NAME]);e({type:"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE",payload:{unseenInterstitialAvailable:i}}),eg(t().distance)&&(t().showInterstitial=i)}},showEdit:()=>({type:"SHOW-EDIT-DRAWER"}),hideEdit:()=>({type:"HIDE-EDIT-DRAWER"}),showReport:()=>({type:"SHOW-REPORT-DRAWER"}),hideReport:()=>({type:"HIDE-REPORT-DRAWER"}),showBottomSheet:()=>({type:"SHOW-BOTTOM-SHEET"}),hideBottomSheet:()=>({type:"HIDE-BOTTOM-SHEET"}),showPager:()=>({type:"SHOW-PAGER"}),hidePager:()=>({type:"HIDE-PAGER"}),setMouseTimeoutId:e=>t=>{t({type:"SET-MOUSE-TIMEOUT-ID",payload:{mouseTimeoutId:e}})},setLastTimeMouseMoved:e=>t=>{t({type:"SET-LAST-TIME-MOUSE-MOVED",payload:{lastTimeMouseMoved:e}})}},ef=function(e,t){let a,{type:i,payload:r}=t;switch(i){case"INITIALIZE":a={...e,...r?.setState};break;case"FETCH-IMAGES-PENDING":{let{fetchPositions:t}=r,i={...e.loading},s={...e.media};t.forEach(e=>{s[e]||(i[e]=!0)}),a={...e,loading:i,...r?.setState};break}case"FETCH-IMAGES-DONE":{let{fetchResult:t,fetchPositions:i,direction:s}=r,o={...e.media},n={...e.loading};t.images.forEach(e=>{if(o[e.position]||(o[e.position]=e,n[e.position]=!1),(0,S.getIsBrowser)()){let t=new Image;t.srcset=(0,et.gA)(e.node,!0),t.src=e.node.url}}),i?.forEach(e=>{n[e]=!1});let l="init"===s?t.images?.[0]?.position:ew(e.position,n,o,s,t);a={...e,initiallyLoading:!1,position:l,media:o,loading:n,listTitle:t.title,totalImages:t.total,enablePagers:t.total>1,galleryUrl:t.galleryUrl};break}case"FETCH-IMAGES-FAILED":{let{fetchPositions:t,fetchError:i}=r,s={...e.loading},o={...e.errors},n={...e.media};t.forEach(e=>{s[e]=!1,n[e]||(o[e]=i)}),a={...e,...r?.setState,errors:o,loading:s};break}case"PAGE-LEFT":case"PAGE-RIGHT":case"GOTO-IMAGE-ID":a={...e,position:r.position,refTag:r.refTag};break;case"UPDATE-DISTANCE":{let t=r?.distance??0,i=e.distance>t?"left":"right",s=eg(t)&&e.unseenInterstitialAvailable,o=eg(t-1),n=eg(t+1);a={...e,distance:r.distance,showInterstitial:s,prevIsInterstitial:o,nextIsInterstitial:n,pageDirection:i};break}case"UPDATE_UNSEEN_INTERSTITIAL_AVAILABLE":{let{unseenInterstitialAvailable:t}=r;a={...e,unseenInterstitialAvailable:t};break}case"SHOW-EDIT-DRAWER":a={...e,showEditDrawer:!0,showReportDrawer:!1};break;case"HIDE-EDIT-DRAWER":a={...e,showEditDrawer:!1};break;case"SHOW-REPORT-DRAWER":a={...e,showReportDrawer:!0,showEditDrawer:!1};break;case"HIDE-REPORT-DRAWER":a={...e,showReportDrawer:!1};break;case"SHOW-BOTTOM-SHEET":a={...e,showBottomSheet:!0};break;case"HIDE-BOTTOM-SHEET":a={...e,showBottomSheet:!1};break;case"SHOW-PAGER":a={...e,pagerVisibility:!0};break;case"HIDE-PAGER":a={...e,pagerVisibility:!1};break;case"SET-MOUSE-TIMEOUT-ID":a={...e,mouseTimeoutId:r.mouseTimeoutId};break;case"SET-LAST-TIME-MOUSE-MOVED":a={...e,lastTimeMouseMoved:r.lastTimeMouseMoved};break;default:throw Error("No reducer defined for type: "+i)}return eh.debug("reduced",i,"to new state",a,"payload",r),a},e_=(e,t,a,i,r,s,o,n,l)=>{let d=(0,z.m8)(),E=(0,Z.useRouter)(),c={type:e,listId:t,initialImageId:a,vanitySubType:r,vanityType:i,refTag:s,gqlClient:d,media:{},errors:{},loading:{},distance:0,showEditDrawer:!1,showReportDrawer:!1,showBottomSheet:!0,pagerVisibility:!0,mouseTimeoutId:0,lastTimeMouseMoved:new Date,enablePagers:!0,pageDirection:"init",adHandlers:o,isUserLoggedIn:n,adBannerCleared:!1,unseenInterstitialAvailable:!1,showInterstitial:!1,prevIsInterstitial:!1,nextIsInterstitial:!1,initiallyLoading:!1};l&&(c=ef(c,{type:"FETCH-IMAGES-DONE",payload:{direction:c.pageDirection,fetchResult:l,fetchPositions:l.images?.map(e=>e.position)}}));let u=X()(ef,c),T=u[0],m=u[1],p={pageLeft:()=>m(eS.page("left")),pageRight:()=>m(eS.page("right")),showEdit:()=>m(eS.showEdit()),hideEdit:()=>m(eS.hideEdit()),showReport:()=>m(eS.showReport()),hideReport:()=>m(eS.hideReport()),showBottomSheet:()=>m(eS.showBottomSheet()),hideBottomSheet:()=>m(eS.hideBottomSheet()),gotoImageId:e=>m(eS.gotoImageId(e)),showPager:()=>m(eS.showPager()),hidePager:()=>m(eS.hidePager()),setMouseTimeoutId:e=>m(eS.setMouseTimeoutId(e)),setLastTimeMouseMoved:e=>m(eS.setLastTimeMouseMoved(e))},g=e=>{Q.M6.isRightArrowKey(e)?p.pageRight():Q.M6.isLeftArrowKey(e)&&p.pageLeft()};(0,I.useEffect)(()=>(window.addEventListener("keydown",g),()=>{window.removeEventListener("keydown",g)}),[]);let A=(0,I.useRef)(void 0),h=(0,I.useRef)(!1);return(0,I.useEffect)(()=>{let{url:e,path:t}=em(T,en((0,S.getIsBrowser)())),a=T.position||0,i=T.media&&T.media[a],r=i?.node.id,s=A.current;if(s&&a!==s&&i&&e){if(A.current=T.position,!r)return;if(!h.current){h.current=!0;return}E.replace(e,t,{shallow:!0,imageId:r})}else 0>window.location.href.indexOf(r)&&e&&E.replace(e,t,{shallow:!0,imageId:r})},[T.position,T.media]),(0,I.useEffect)(()=>{m(eS.initialize(l))},[]),(0,I.useDebugValue)(T),{state:T,actions:p}},ew=(e,t,a,i,r)=>{let s=e,o="left"===i;if(void 0!==s&&!t[s]&&!a[s]){if(r.images.length){let e=o?r.images.length-1:0;s=r.images[e].position}else{let e=Object.keys(a).sort();e.length&&(o&&e.reverse(),s=e.reduce((e,t)=>{let a=e,i=Number(t);return void 0===a?a=i:o&&i<s&&a>s?a=i:i>s&&a<s&&(a=i),a},void 0))}}return s},eN=e=>{let{type:t,listId:a,imgId:s,vanityType:o,vanitySubType:d,refTag:E,adHandlers:c,initialQueryData:u,initialQueryError:T}=e,m=(0,O.n)(),p=(0,b.Z)(),{state:g,actions:A}=e_(t,a,s,o,d,E,c,m,u?eI(t,a,u):void 0),{showInterstitial:M,errors:P,position:C,loading:H,media:x,totalImages:B,initiallyLoading:W}=g,[F,j]=(0,I.useState)(0),Z=(0,I.useRef)(null),J=P[C],X=x[C]?.node,z=x[C-1]?.node,Q=x[C+1]?.node,ee=x[C]?.position,et=H[C]||W,ea=x[C]?.node.correctionLink?.url,ei=x[C]?.node.reportingLink?.url,er={countLabel:(0,v.N)(k.KL.countLabel,{position:ee,total:B}),previousImageLabel:(0,v.N)(k.KL.previousImageLabel),nextImageLabel:(0,v.N)(k.KL.nextImageLabel),closePromptLabel:(0,v.N)(k.KL.closePromptLabel)},es=(0,f.useSwipeable)({onSwipedLeft:e=>{K(-e.deltaX,e=>j(e),A.pageRight)},onSwipedRight:e=>{K(-e.deltaX,e=>j(e),A.pageLeft)},onSwiping:e=>{var t,a;t=-e.deltaX,a=e=>j(e),i?r=()=>{a(q(t))}:(a(q(t)),i=setTimeout(()=>{r&&r(),Y()},V))},onSwiped:()=>{var e;e=e=>j(e),Y(),setTimeout(()=>e(0),V)}});function eo(e){let t=document.getElementsByClassName(e);return!!(t.length>0&&t[0].matches(":hover"))}function en(){return!(0,S.getIsNode)()&&(0,h.getIsMdot)(window.location.hostname)}function el(){if(et||en())return;let e=eo(k.$C.PAGE_LEFT),t=eo(k.$C.PAGE_RIGHT);e||t||A.hidePager()}if((0,I.useEffect)(()=>{en()&&A.showPager()},[]),(0,I.useEffect)(()=>{A.setMouseTimeoutId(setTimeout(el,5e3))},[]),(0,I.useEffect)(()=>{M&&clearTimeout(g.mouseTimeoutId)},[M]),J||T)return(0,n.jsx)(G.Bc,{});let ed={image:X||void 0,title:g.listTitle,description:X?.caption?.plainText||g.listTitle,openGraphData:{type:R.s.Website}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.Se,{...ed}),(0,n.jsx)(y.Z,{}),(0,n.jsx)(f.PageContentContainer,{children:(0,n.jsx)(U,{state:g,imagePosition:ee})}),(0,n.jsxs)(G.zb,{"data-testid":k.$C.PARENT,className:k.$C.PARENT,children:[(0,n.jsx)(G.GX,{...es,onMouseMove:()=>{g.pagerVisibility||A.showPager(),+new Date().getTime()-g.lastTimeMouseMoved.getTime()>400&&(clearTimeout(g.mouseTimeoutId),A.setLastTimeMouseMoved(new Date),A.setMouseTimeoutId(setTimeout(el,2e3)))},"data-testid":k.$C.TOUCH_HANDLER,onClick:e=>{M?$(e,Z.current,"ad-interstitial"):g.showBottomSheet?A.hideBottomSheet():A.showBottomSheet()},children:(0,n.jsx)(G.D5,{})}),g.enablePagers&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G.f$,{isVisible:!et&&g.pagerVisibility,direction:"left",onSelect:A.pageLeft,className:k.$C.PAGE_LEFT,ariaLabel:er.previousImageLabel}),(0,n.jsx)(G.ed,{isVisible:!et&&g.pagerVisibility,direction:"right",onSelect:A.pageRight,className:k.$C.PAGE_RIGHT,ariaLabel:er.nextImageLabel})]}),et&&!M&&(0,n.jsx)(G.zL,{"data-testid":k.$C.LOADER,children:(0,n.jsx)(f.Loader,{})}),M&&(0,n.jsx)(G.C1,{offset:F,ref:Z,isMdot:en(),children:(0,n.jsx)(L.ZP,{name:l.INTERSTITIAL_SLOT_NAME})}),!g.showInterstitial&&!J&&!T&&!et&&X&&(0,n.jsx)(w.Z,{image:X,"data-testid":k.$C.IMAGE,offset:F,prevImage:g.prevIsInterstitial?void 0:z,nextImage:g.nextIsInterstitial?void 0:Q},"image-"+X.id),!g.showInterstitial&&!J&&!et&&X&&(0,n.jsx)(D.V,{className:k.$C.MEDIA_SHEET,imageData:X,content:{contextTitle:`${g.listTitle}`,contextCount:er.countLabel},editFlow:ea&&p?{desktopLink:ea,desktopOnOpen:()=>A.showEdit(),resolveMobileURL:e=>e.correctionLink.url}:void 0,reportFlow:ei&&p?{desktopLink:ei,desktopOnOpen:()=>A.showReport(),resolveMobileURL:e=>e.reportingLink.url}:void 0,listId:a,isClosed:!g.showBottomSheet,onCloseClicked:A.hideBottomSheet,onOpenClicked:A.showBottomSheet,refTagPrefix:`${k.Nw[g.type]}_mv`}),(0,n.jsx)(f.Drawer,{"data-testid":"mv-contribute-edit-drawer",className:k.$C.CONTRIBUTE_EDIT_DRAWER,isOpen:g.showEditDrawer,onCloseClicked:A.hideEdit,closePromptLabel:er.closePromptLabel,children:X&&(0,n.jsx)(_.o,{src:ea,onCloseMeCallback:A.hideEdit,className:k.$C.CONTRIBUTE_EDIT_IFRAME})}),(0,n.jsx)(f.Drawer,{className:k.$C.CONTRIBUTE_REPORT_DRAWER,isOpen:g.showReportDrawer,onCloseClicked:A.hideReport,children:X&&(0,n.jsx)(_.o,{src:ei,onCloseMeCallback:A.hideReport,className:k.$C.CONTRIBUTE_REPORT_IFRAME})})]})]})};var eR=a(42644),eD=a(42951),ey=a(98359),eL=!0,ev=e=>{let{type:t,id:a,vanityType:i,vanitySubType:r,refTag:s,validImageId:o,initialQueryData:c,initialQueryError:I}=e,p=(0,eR.D)();return p.clientSideUrl=(0,l.updateClientSideUrl)(u()().publicRuntimeConfig.adsPublicSiteHost,(0,E.isDevNodeEnv)(),p.clientSideUrl),(0,n.jsx)(m.ZP,{children:(0,n.jsxs)(ey.Z,{hideNav:!0,hideFooter:!0,hideNavigationProgressBar:!0,baseColor:"baseAlt",orientContent:"full",cti:T.CTIS.GALLERIES_CTI,children:[(0,n.jsx)(eN,{type:t,listId:a,imgId:o,vanityType:i,vanitySubType:r,refTag:s,adHandlers:{updateBannerAd:async()=>{let e=JSON.parse(JSON.stringify(p));delete e.slotSizeMap[l.INTERSTITIAL_SLOT_NAME],await A(e)},updateInterstitialAd:async()=>{if(p.isAbpEnabled)return;let e=JSON.parse(JSON.stringify(p));return delete e.slotSizeMap[l.MEDIAVIEWER_BANNER_SLOT_NAME],A(e)}},initialQueryData:c,initialQueryError:I}),(0,eD.YN)(),(0,n.jsx)(d.CSAPageATFScript,{})]})})}}}]);